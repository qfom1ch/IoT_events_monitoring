IoT Events Monitoring
---------------------
ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ IoT-ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ², Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ ÑÑ‚Ğ¸Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹, Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ² Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ REST API Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸ Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ğ°Ğ¼Ğ¸.

Features
--------
- ğŸ“¦ Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° ÑĞ»Ğ¾Ğ¸: domain, application, infrastructure, presentation
- ğŸ”Œ Ğ˜Ğ½ÑŠĞµĞºÑ†Ğ¸Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· DI-ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
- ğŸ“¡ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Kafka
- ğŸ—ƒ Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² MongoDB
- ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ñ‡ĞµÑ€ĞµĞ· Elasticsearch
- ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Prometheus Ğ¸ Grafana
- ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ÑĞ½Ğ¸Ñ‚, Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹
- ğŸ³ Docker: dev Ğ¸ test Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
- ğŸ›  Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ uv Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑĞ¼Ğ¸

## Ğ¡Ñ‚ĞµĞº

| Category               | Technologies                          |
|------------------------|---------------------------------------|
| **Language**           | Python 3.12.1                         |
| **Web Framework**      | FastAPI                               |
| **Database**           | MongoDB, Elasticsearch                |
| **Search Engine**      | Elasticsearch                         |
| **Message Queue**      | Kafka                                 |
| **DI**                 | dishka                                |
| **Infrastructure**     | Docker, Docker Compose                |
| **Logging**            | Filebeat â†’ Elasticsearch â†’ Kibana     |
| **Monitoring**         | Prometheus, Grafana                   |
| **Testing**            | Pytest: unit, functional, integration |
| **Build Tool**         | uv                                    |
| **Linting/Formatting** | Ruff                          |


Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
----------------
```tree
 src
â”‚Â Â  â”œâ”€â”€ application
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ use_cases
â”‚Â Â  â”œâ”€â”€ consumer
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ kafka 
â”‚Â Â  â”œâ”€â”€ core
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ clients
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ exceptions.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ logging_config.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ message_consumer.py
â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ alerts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ devices
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ enums.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ sensor_events
â”‚Â Â  â”œâ”€â”€ infrastructure
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ di
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ elastic
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ messaging
â”‚Â Â  â”‚Â Â  â””â”€â”€ mongodb
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ monitoring
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ metrics.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ middleware.py
â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ api
â”‚Â Â  â”‚Â Â  â””â”€â”€ __init__.py
â”œâ”€â”€ tests
â”‚Â Â  â”œâ”€â”€ functional
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ conftest.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ devices
â”‚Â Â  â”‚Â Â  â””â”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ integration
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ conftest.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ devices
â”‚Â Â  â”‚Â Â  â””â”€â”€__init__.py 
â”‚Â Â  â”œâ”€â”€ test_producer.py
â”‚Â Â  â””â”€â”€ unit
â”‚Â Â      â”œâ”€â”€ devices
â”‚Â Â      â””â”€â”€ __init__.py    
```

Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
---------------

- ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°.

    ``cd Iot_events_monitoring``


- Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ ÑĞ±Ğ¾Ñ€ĞºĞ¸

    ``sudo apt-get install clang libpq-dev``


- Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° uv


    *On macOS or Linux*

    ``curl -LsSf https://astral.sh/uv/install.sh | sh``


    *On Windows*

    ``powershell -c "irm https://astral.sh/uv/install.ps1 | iex"``


- Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚

    ``uv python pin 3.12.1``

    ``uv venv``

    ``uv sync``

    ``source .venv/bin/activate``


- ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ¾Ğ´Ğ°

    ``ruff check --unsafe-fixes --fix``

    ``ruff format``


- Makefile ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

    ``make dev-up``  â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ‘Ğ”, Kafka Ğ¸ Ñ‚.Ğ´.) Ğ² Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Docker Compose.

    ``make dev-down``  â€” Ğ¾ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¸ ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ dev-Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ.

    ``make test-up`` â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹, Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ² (Ğ‘Ğ”, Kafka Ğ¸ Ñ‚.Ğ´.), Ğ² Docker Compose.

    ``make test-down`` â€” Ğ¾ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¸ ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ.

    ``make test-run`` â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ²ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ pytest.

    ``make test-unit-run`` â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ unit-Ñ‚ĞµÑÑ‚Ñ‹.

    ``make test-integration-run`` â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹.

    ``make test-functional-run`` â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹.


- Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ API Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ http://127.0.0.1:8000/docs Ğ¿Ğ¾ÑĞ»Ğµ ÑÑ‚Ñ€Ğ°Ñ‚Ğ°
    ![ScreenShot](screenshots/img.png)
